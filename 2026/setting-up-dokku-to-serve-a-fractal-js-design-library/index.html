<!DOCTYPE html>
<html lang="en">

<head>
      <title>Setting up dokku to serve a fractal-js design library | David Kane</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://dkane.net/theme/css/tachyons.min.css" />
    <link href="https://fonts.googleapis.com/css?family=Archivo|Raleway|Pacifico" rel="stylesheet">
    <link rel="stylesheet" href="https://dkane.net/theme/css/style.css" />
    <link rel="stylesheet" href="https://dkane.net/theme/css/pygment.css" />
    <link rel="stylesheet" href="https://dkane.net/theme/css/twitter-embed.css" />
    <link rel="shortcut icon" href="https://dkane.net/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://dkane.net/favicon.ico" type="image/x-icon">
    <meta name="fediverse:creator" content="@kanedr@mastodon.social" />

<link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="David Kane Full Atom Feed" />
<link href="/feed.rss" type="application/rss+xml" rel="alternate" title="David Kane Full RSS Feed" />
<link href="/feeds/code.atom.xml" type="application/atom+xml" rel="alternate" title="David Kane Categories Atom Feed" />


    <meta name="tags" content="Dokku" />
  
</head>

<body id="index" class="home w-100 sans-serif near-black base-font bg-wavy">
    <header id="banner" class="body header-font ph3 ph5-ns pt3 pb3 moon-gray">
<div class="fr f3-ns mt1 mr2 w-100 w-auto-ns tr pb3">
    <a href="/blog" class="white logo underline double underline-yellow">Blog</a>
|    <a href="https://kanedata.co.uk/pages/about" class="white logo underline double underline-yellow">About</a>
|    <a href="https://kanedata.co.uk/pages/contact" class="white logo underline double underline-yellow">Contact</a>
</div>        <h1 class="f1 lh-solid mv0 logo">
            <a href="https://dkane.net/" class="link moon-gray underline-yellow underline">
                David Kane
            </a>
        </h1>
        <h1 class="f2-ns f3 lh-solid mv0">Charity data blog</h1>
    </header><!-- /#banner -->
    <main class="ph0 bg-white cf">
<section id="content" class="fl w-100 ph3 ph5-ns pb6">
  <div class="w-60-l w-100 center">
    <header>
        <h2 class="f2 header-font">
        <a href="https://dkane.net/2026/setting-up-dokku-to-serve-a-fractal-js-design-library/" rel="bookmark" class="link near-black"
            title="Permalink to Setting up dokku to serve a fractal-js design library">Setting up dokku to serve a fractal-js design library</a></h2>
            
    </header>
    <footer class="post-info pb3 bb">
        <address class="vcard author dib fs-normal">
            <a class="url fn link near-black" href="https://dkane.net/author/david-kane/">David Kane</a>
        </address>
        <span class="ph2"> | </span>
        <time class="published dib" datetime="2026-01-08T11:14:57+00:00">
        Thu 08 January 2026
        </time>
        <span class="ph2"> | </span>
        <a class="url fn link mid-gray" href="https://dkane.net/category/code/">Code</a>
        <span class="ph2"> | </span>
        <span class="fn">Tags: 
            <a class="url fn link mid-gray" href="https://dkane.net/tag/dokku/">Dokku</a>        </span>
    </footer><!-- /.post-info -->
    <div class="entry-content f4 lh-copy">
        <p>This guide shows you how to deploy a site built with the <a href="https://fractal.build/">Fractal</a> framework to a server set up with <a href="https://dokku.com/">dokku</a>. The guide assumes you already have a working fractal site locally (set up as a git repository) as well as a working dokku server.</p>
<h2 id="add-needed-files-to-the-repository">Add needed files to the repository</h2>
<p>You first need to add 3 files to the root directory of your repository.</p>
<ol>
<li><code>.static</code>: Add a blank file called <code>.static</code> in the root directory. This tells dokku that it should serve a static site.</li>
<li><code>app.json</code>: Add a file called <code>app.json</code> in the root directory. This tells dokku what command to run before deploying the site to build the site. This needs the following contents (adjust the command if the actual commands to build the site are different):</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;scripts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;dokku&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;predeploy&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cd /app/www &amp;&amp; npm run gulp:build &amp;&amp; npm run fractal:build&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<ol>
<li><code>buildpacks</code>: Add a file called <code>.buildpacks</code> to the root directory. This tells dokku what buildpacks to use. The file should have the following contents:</li>
</ol>
<div class="highlight"><pre><span></span><code>https://github.com/heroku/heroku-buildpack-nodejs.git
https://github.com/dokku/buildpack-nginx.git
</code></pre></div>

<h2 id="set-up-the-app-on-dokku">Set up the app on dokku</h2>
<p>This needs to happen on your dokku server. Create the app, and set a config setting <code>NGINX_ROOT</code> to "output" (this is the directory where the site will be built - this should be defined in <code>fractal.config.js</code>).</p>
<p>In this case we're calling the app <code>design</code> - this can be changed</p>
<div class="highlight"><pre><span></span><code>dokku<span class="w"> </span>apps:create<span class="w"> </span>design
dokku<span class="w"> </span>config:set<span class="w"> </span>design<span class="w"> </span><span class="nv">NGINX_ROOT</span><span class="o">=</span><span class="s1">&#39;output&#39;</span>
</code></pre></div>

<h2 id="deploy-the-site">Deploy the site</h2>
<p>On your local version, add the dokku server as a git remote. Replace <code>123.456.789.123</code> with the actual IP address or domain name, and <code>design</code> with the actual name of the app.</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>dokku<span class="w"> </span>dokku@123.456.789.123:design
</code></pre></div>

<p>Next push the site to the dokku server. This should build the site:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>push<span class="w"> </span>dokku<span class="w"> </span>main
</code></pre></div>

<p>You should now see the site deployed correctly.</p>
<h2 id="further-resources">Further resources</h2>
<ul>
<li><a href="https://github.com/dokku/heroku-buildpack-nginx?tab=readme-ov-file">Additional configuration values for the server</a></li>
</ul>
    </div><!-- /.entry-content -->
    </div>
</section>
    </main>
    <footer id="contentinfo" class="body ph3 ph5-ns db pv5 moon-gray bg-near-black">
        <div class="h4 fl pr5">
            <img src="https://dkane.net/theme/images/logo.svg" class="h3" title="Kane Data Limited">
        </div>
        <div>
<a href="mailto:david@dkane.net" class="link yellow" rel="me">Email</a>
 | <a href="https://github.com/sponsors/kanedata" class="link yellow" rel="me">Support our work</a>
 | <a href="https://mastodon.social/@kanedr" class="link yellow" rel="me">@kanedr@mastodon.social</a>
 | <a href="https://bsky.app/profile/dkane.net" class="link yellow" rel="me">ðŸ¦‹</a>
 | <a href="https://github.com/drkane" class="link yellow" rel="me">github.com/drkane</a>
 | <a href="https://github.com/kanedata" class="link yellow" rel="me">github.com/kanedata</a>
 | <a href="https://status.kanedata.co.uk/" class="link yellow" rel="me">status</a>
            | <a href="/feed.rss" class="link yellow">RSS</a>
        </div>
        <div class="mt3">
<a href="https://kanedata.co.uk/" class="link yellow" rel="me">Kane Data Ltd</a>
 | <a href="https://findthatcharity.uk/" class="link yellow" rel="me">Find That Charity</a>
 | <a href="https://findthatpostcode.uk/" class="link yellow" rel="me">Find That Postcode</a>
 | <a href="https://ngoexplorer.org/" class="link yellow" rel="me">NGO Explorer</a>
 | <a href="https://charizone.co.uk/" class="link yellow" rel="me">Charizone</a>
 | <a href="https://charityclassification.org.uk/" class="link yellow" rel="me">Charity Classification</a>
        </div>
        <div class="mt3 f6">
            &copy 2018 - 2026 Kane Data Limited |
            <address id="about" class="vcard body di fs-normal">
                Built with <a href="http://getpelican.com/" class="link yellow">Pelican</a>
            </address><!-- /#about --> |
            Kane Data Limited is registered as a company in England (<a
                href="https://find-and-update.company-information.service.gov.uk/company/14015213"
                class="link yellow">company number 14015213</a>)
        </div>
    </footer><!-- /#contentinfo -->
<script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
<noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt="" referrerpolicy="no-referrer-when-downgrade" /></noscript></body>

</html>